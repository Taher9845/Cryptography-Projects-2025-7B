<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hybrid Caesar-Vigenère Cipher Advanced</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to right, #6a11cb, #2575fc);
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
    }
    .container {
        background: #1f1f1f;
        padding: 25px 30px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        width: 100%;
        max-width: 500px;
    }
    h2 { text-align: center; margin-bottom: 20px; }
    input[type="text"], input[type="number"] {
        width: 100%;
        padding: 10px;
        margin: 8px 0 15px;
        border-radius: 8px;
        border: none;
        outline: none;
        font-size: 16px;
    }
    .output-box {
        background: #2a2a2a;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 15px;
        word-wrap: break-word;
        min-height: 40px;
    }
    button {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: none;
        background: #4CAF50;
        color: #fff;
        font-size: 16px;
        cursor: pointer;
        margin-bottom: 15px;
        transition: 0.3s;
    }
    button:hover { background: #45a049; }
    .step-title { font-weight: bold; margin-top: 10px; color: #ffd700; }
</style>
</head>
<body>
<div class="container">
    <h2>Hybrid Caesar-Vigenère Cipher</h2>

    <label>Plaintext:</label>
    <input type="text" id="plaintext" placeholder="Enter text here">

    <label>Caesar Shift:</label>
    <input type="number" id="caesarShift" value="3">

    <label>Vigenère Key:</label>
    <input type="text" id="vigenereKey" placeholder="Enter key">

    <button onclick="processCipher()">Encrypt & Decrypt</button>

    <div class="step-title">Caesar Step:</div>
    <div class="output-box" id="caesarStep"></div>

    <div class="step-title">Vigenère Encryption:</div>
    <div class="output-box" id="vigenereEncrypted"></div>

    <div class="step-title">Hybrid Encrypted Text:</div>
    <div class="output-box" id="encryptedText"></div>

    <div class="step-title">Hybrid Decrypted Text:</div>
    <div class="output-box" id="decryptedText"></div>
</div>

<script>
function caesarEncrypt(text, shift) {
    text = text.toUpperCase();
    let result = '';
    for (let ch of text) {
        if (ch >= 'A' && ch <= 'Z') {
            result += String.fromCharCode((ch.charCodeAt(0) - 65 + shift) % 26 + 65);
        } else {
            result += ch;
        }
    }
    return result;
}

function caesarDecrypt(text, shift) {
    text = text.toUpperCase();
    let result = '';
    for (let ch of text) {
        if (ch >= 'A' && ch <= 'Z') {
            result += String.fromCharCode((ch.charCodeAt(0) - 65 - shift + 26) % 26 + 65);
        } else {
            result += ch;
        }
    }
    return result;
}

function vigenereEncrypt(text, key) {
    text = text.toUpperCase();
    key = key.toUpperCase();
    let result = '';
    let keyIndex = 0;
    for (let ch of text) {
        if (ch >= 'A' && ch <= 'Z') {
            let shift = key.charCodeAt(keyIndex % key.length) - 65;
            result += String.fromCharCode((ch.charCodeAt(0) - 65 + shift) % 26 + 65);
            keyIndex++;
        } else {
            result += ch;
        }
    }
    return result;
}

function vigenereDecrypt(text, key) {
    text = text.toUpperCase();
    key = key.toUpperCase();
    let result = '';
    let keyIndex = 0;
    for (let ch of text) {
        if (ch >= 'A' && ch <= 'Z') {
            let shift = key.charCodeAt(keyIndex % key.length) - 65;
            result += String.fromCharCode((ch.charCodeAt(0) - 65 - shift + 26) % 26 + 65);
            keyIndex++;
        } else {
            result += ch;
        }
    }
    return result;
}

function processCipher() {
    let plaintext = document.getElementById('plaintext').value;
    let shift = parseInt(document.getElementById('caesarShift').value);
    let key = document.getElementById('vigenereKey').value;

    if(!plaintext || !key || isNaN(shift)) {
        alert("Please enter valid plaintext, key, and shift.");
        return;
    }

    // Caesar step
    let caesarStep = caesarEncrypt(plaintext, shift);
    document.getElementById('caesarStep').innerText = caesarStep;

    // Vigenère step
    let vigenereStep = vigenereEncrypt(caesarStep, key);
    document.getElementById('vigenereEncrypted').innerText = vigenereStep;

    // Final encrypted text
    document.getElementById('encryptedText').innerText = vigenereStep;

    // Decryption
    let decryptedHybrid = caesarDecrypt(vigenereDecrypt(vigenereStep, key), shift);
    document.getElementById('decryptedText').innerText = decryptedHybrid;
}
</script>
</body>
</html>
